# BootCamp üåøSuzano & DIO: An√°lise de Dados com Power BI üé≤ (*Desafio 01*)
### Desafio 01 - Projeto Conceitual de Banco de Dados ‚Äì E-COMMERCE  
    
## üéØObjetivo:
Realizar a **modelagem de dados** do projeto proposto de **E-Commerce**, conforme requisitos informados.  
O intuito √© aplicar o conhecimento compartilhado at√© essa etapa do curso.  
Podendo utilizar uma das ferramentas demonstradas na aula: **DB Designer**, **Draw.io** e **MySQL Workbench**.  
    ![alt text](./imagens/img_DesafioAceito.png)

    
## ü§ìApresenta√ß√£o do Desafio:
>Elaborar o Modelo Relacional do Projeto de E-Commerce, considerando que a proposta √© a venda de produtos.  
>A venda dos produtos ocorrer√° atrav√©s de uma √∫nica plataforma online.  
>Abaixo temos o üìã Levantamento de Requisitos descritos no desafio do Bootcamp da Suzano & DIO:
    

- üìã 1) Narrativa - Cliente
    - O cliente pode se cadastrar no site com seu CPF ou CNPJ.
    - O Endere√ßo do cliente ir√° determinar o valor do frete.
    - Um cliente pode comprar mais de um pedido.
    - Este tem um per√≠odo de car√™ncia para devolu√ß√£o do produto.
- üìã 2) Narrativa - Produto
    - Os produtos s√£o vendidos por uma √∫nica plataforma online. Contudo, estes podem ter vendedores distintos (terceiros).
    - Cada produto possui um fornecedor.
    - Um ou mais produtos podem compor um pedido.
- üìã 3) Narrativa - Pedido
    - O pedidos s√£o criados por clientes e possuem informa√ß√µes de compra, endere√ßo e status da entrega.
    - Um produto ou mais compoem o pedido.
    - O pedido pode ser cancelado.
- üìã 4) Narrativa - Fornecedor & Estoque
    - Precisa de defini√ß√£o.
- üìã 5) Refinamento
    - Um cliente¬†pode ser PJ ou PF, mas n√£o pode ter as duas informa√ß√µes.
    - Pode ter cadastrado mais de uma forma de pagamento.
    - Entrega possui status e c√≥digo de rastreio.

### Premissas e Considera√ß√µes:

Esses requisitos precisam de refinamentos que consistiriam de algumas sess√µes de questionamentos para melhor entendimento e detalhamento. Sendo este um exemplo/exerc√≠cio, iremos destacar algumas considera√ß√µes como verdades que seria parte do resultado desse trabalho de refinamento.

- O per√≠odo de car√™ncia ser√° calculado conforme regra de negocio na aplica√ß√£o, a base de dados disponibilizar√° um campo para registro da data limite da devolu√ß√£o. Esta reflete a data de entrega acrescida do n√∫mero de dias deste calculo do prazo.

- No cadastro do Cliente deve constar apenas CPF ou CNPJ, n√£o pode informar ambos ou deixar de informar.

- Chamaremos de Item Pedido a rela√ß√£o de cada produto, comprado em um pedido por um determinado cliente em determinado momento.

- Vendedores ser√£o considerados em cada item pedido. Pois entendemos que os vendedores s√£o os respons√°veis pela exposi√ß√£o na plataforma online do Marketplace. Portanto, em cada sele√ß√£o de produto que o cliente fizer, possuir√° a respectiva informa√ß√£o do vendedor.

- O cancelamento do pedido ser√° tratado na aplica√ß√£o, na base ser√° registrado apenas com o valor apropriado no Status do Pedido.

- O controle de estoque do Fornecedor ser√° tratado na aplica√ß√£o. A base de dados fornecer√° um campo de Quantidade de Estoque por produto para persistir tal situa√ß√£o conforme ocorr√™ncia de movimenta√ß√µes do produto.

## ü§ìDesafio Feitoüòé! Minha resolu√ß√£oüéâüéâüéâ:
> üìã**Modelo L√≥gico**:  
> ![Desafio_01](./imagens/img_Desafio_Suzano_01_eCommerce_Projeto_Conceitual.png)

- Garantiremos a regra de informe apenas do CPF ou CNPJ do cliente com uma Check Constraint nesta tabela.

- Status do Pedido: Solicitado, Aguardando Aprova√ß√£o, Confirmando Pagamento, Preparando Envio, Enviado p/ Transportadora, Entregue e Cancelado. Tamb√©m ser√° uma Check Constraint.

- Meio de pagamento: A aplica√ß√£o ir√° controla o processo de forma de pagamentos, inclusive garantir que o somat√≥rio dos valores de todas os meios de pagamentos utilizados √© igual ao valor Total do Pedido. A base de dados disponibilizar√° em sua estrutura uma tabela com as formas de pagamentos poss√≠veis e outra para relacionar com Pedido, correspondendo as formas de pagamentos utilizadas para pagamento de determinado pedido.

- O c√≥digo de rastreio da entrega ser√° um campo no pedido.

> üìã**Modelo F√≠sico**:  

```sql
-- MySQL Script generated by MySQL Workbench
-- Fri Nov 15 20:07:53 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema ECommerce
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ECommerce
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ECommerce` DEFAULT CHARACTER SET utf8 ;
USE `ECommerce` ;

-- -----------------------------------------------------
-- Table `ECommerce`.`Fornecedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ECommerce`.`Fornecedor` (
  `idFornecedor` INT NOT NULL AUTO_INCREMENT,
  `nomeFornecedor` VARCHAR(70) NOT NULL,
  `CNPJ` INT NOT NULL,
  PRIMARY KEY (`idFornecedor`),
  UNIQUE INDEX `CNPJ_UNIQUE` (`CNPJ` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ECommerce`.`Produto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ECommerce`.`Produto` (
  `idProduto` INT NOT NULL AUTO_INCREMENT,
  `nomeProduto` VARCHAR(45) NOT NULL,
  `Fornecedor_idFornecedor` INT NOT NULL,
  `qtdEstoque` INT NOT NULL DEFAULT 0,
  PRIMARY KEY (`idProduto`),
  INDEX `fk_Produto_Fornecedor_idx` (`Fornecedor_idFornecedor` ASC) VISIBLE,
  CONSTRAINT `fk_Produto_Fornecedor`
    FOREIGN KEY (`Fornecedor_idFornecedor`)
    REFERENCES `ECommerce`.`Fornecedor` (`idFornecedor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ECommerce`.`Cliente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ECommerce`.`Cliente` (
  `idCliente` INT NOT NULL AUTO_INCREMENT,
  `nomeCliente` VARCHAR(100) NULL,
  `CPF` INT(11) NULL COMMENT 'CPF ser√° obrigat√≥rio, caso CNPJ n√£o seja informado.\nIsso ser√° garantido por Check Constraint.',
  `CNPJ` INT(14) NULL COMMENT 'CNPJ ser√° obrigat√≥rio, caso CPF n√£o seja informado.\nIsso ser√° garantido por Check Constraint.',
  PRIMARY KEY (`idCliente`),
  UNIQUE INDEX `CPF_UNIQUE` (`CPF` ASC) VISIBLE,
  UNIQUE INDEX `CNPJ_UNIQUE` (`CNPJ` ASC) VISIBLE,
  CONSTRAINT `chk_CPF_CNPJ`
    CHECK (
      (CPF IS NOT NULL AND CNPJ IS NULL) OR 
      (CPF IS NULL AND CNPJ IS NOT NULL)
    ))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ECommerce`.`Endereco_Cliente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ECommerce`.`Endereco_Cliente` (
  `idEndereco_Cliente` INT NOT NULL AUTO_INCREMENT,
  `Logradouro` VARCHAR(100) NOT NULL,
  `Numero` INT NULL,
  `Complemento` VARCHAR(50) NULL,
  `CEP` VARCHAR(8) NOT NULL,
  `Bairro` VARCHAR(70) NOT NULL,
  `Cidade` VARCHAR(70) NOT NULL,
  `Estado` VARCHAR(50) NOT NULL,
  `Cliente_idCliente` INT NOT NULL,
  PRIMARY KEY (`idEndereco_Cliente`, `Cliente_idCliente`),
  INDEX `fk_Endereco_Cliente_Cliente1_idx` (`Cliente_idCliente` ASC) VISIBLE,
  CONSTRAINT `fk_Endereco_Cliente_Cliente1`
    FOREIGN KEY (`Cliente_idCliente`)
    REFERENCES `ECommerce`.`Cliente` (`idCliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ECommerce`.`Pedido`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ECommerce`.`Pedido` (
  `idPedido` INT NOT NULL AUTO_INCREMENT,
  `dataPedido` DATE NOT NULL,
  `statusPedido` VARCHAR(30) NOT NULL COMMENT 'O status do pedido posicionar√° toda situa√ß√£o do mesmo at√© finaliza√ß√£o da entrega.',
  `Endereco_Cliente_idEndereco_Cliente` INT NOT NULL,
  `Endereco_Cliente_Cliente_idCliente` INT NOT NULL,
  `dataEntrega` DATE NULL,
  `dataPrazoDevolucao` DATE NULL COMMENT 'O prazo de devolu√ß√£o √© uma regra de neg√≥cio que considera v√°rios fatores. Portanto, o sistema far√° o calculo do prazo e registrar√° esse dado neste campo do pedido.',
  `valorFrete` DECIMAL(5,2) NULL COMMENT 'O valor do frete ser√° calculado pelo sistema e registrado neste campo. Esse calculo considera o endere√ßo de entrega apontado no pedido informado pelo cliente e registrado no pedido.',
  `codigoRastreioEntrega` VARCHAR(50) NULL,
  PRIMARY KEY (`idPedido`),
  INDEX `fk_Pedido_Endereco_Cliente1_idx` (`Endereco_Cliente_idEndereco_Cliente` ASC, `Endereco_Cliente_Cliente_idCliente` ASC) VISIBLE,
  CONSTRAINT `fk_Pedido_Endereco_Cliente1`
    FOREIGN KEY (`Endereco_Cliente_idEndereco_Cliente` , `Endereco_Cliente_Cliente_idCliente`)
    REFERENCES `ECommerce`.`Endereco_Cliente` (`idEndereco_Cliente` , `Cliente_idCliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT chk_statusPedido
    CHECK (statusPedido IN ('Solicitado', 'Aguardando Aprova√ß√£o', 'Confirmando Pagamento', 'Preparando Envio', 'Enviado p/ Transportadora', 'Entregue', 'Cancelado'))
	)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ECommerce`.`Vendedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ECommerce`.`Vendedor` (
  `idVendedor` INT NOT NULL AUTO_INCREMENT,
  `nomeVendedor` VARCHAR(45) NOT NULL,
  `CNPJ` INT(14) NOT NULL,
  PRIMARY KEY (`idVendedor`),
  UNIQUE INDEX `CNPJ_UNIQUE` (`CNPJ` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ECommerce`.`Item_Pedido`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ECommerce`.`Item_Pedido` (
  `Produto_idProduto` INT NOT NULL,
  `Pedido_idPedido` INT NOT NULL,
  `Quatidade` INT NOT NULL,
  `valorUnitario` DECIMAL(10,2) NULL,
  `Vendedor_idVendedor` INT NOT NULL,
  PRIMARY KEY (`Produto_idProduto`, `Pedido_idPedido`),
  INDEX `fk_Produto_has_Pedido_Pedido1_idx` (`Pedido_idPedido` ASC) VISIBLE,
  INDEX `fk_Produto_has_Pedido_Produto1_idx` (`Produto_idProduto` ASC) VISIBLE,
  INDEX `fk_Item_Pedido_Vendedor1_idx` (`Vendedor_idVendedor` ASC) VISIBLE,
  CONSTRAINT `fk_Produto_has_Pedido_Produto1`
    FOREIGN KEY (`Produto_idProduto`)
    REFERENCES `ECommerce`.`Produto` (`idProduto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Produto_has_Pedido_Pedido1`
    FOREIGN KEY (`Pedido_idPedido`)
    REFERENCES `ECommerce`.`Pedido` (`idPedido`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Item_Pedido_Vendedor1`
    FOREIGN KEY (`Vendedor_idVendedor`)
    REFERENCES `ECommerce`.`Vendedor` (`idVendedor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ECommerce`.`Meio_Pagamento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ECommerce`.`Meio_Pagamento` (
  `idMeio_Pagamento` INT NOT NULL AUTO_INCREMENT,
  `nomeMeio_Pagamento` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`idMeio_Pagamento`),
  UNIQUE INDEX `nomeMeio_Pagamento_UNIQUE` (`nomeMeio_Pagamento` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ECommerce`.`Pagamento_Pedido`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ECommerce`.`Pagamento_Pedido` (
  `idPagamento_Pedido` INT NOT NULL AUTO_INCREMENT,
  `Pedido_idPedido` INT NOT NULL,
  `Meio_Pagamento_idMeio_Pagamento` INT NOT NULL,
  `valorPagamento` DECIMAL(10,2) NOT NULL COMMENT 'A valida√ß√£o da soma de todos as formas de pagamento com o total do pedido dever√° ser validado pela aplica√ß√£o.',
  `numeroParcelas` INT NOT NULL,
  PRIMARY KEY (`idPagamento_Pedido`),
  INDEX `fk_Meio_Pagamento_has_Pedido_Pedido1_idx` (`Pedido_idPedido` ASC) VISIBLE,
  INDEX `fk_Meio_Pagamento_has_Pedido_Meio_Pagamento1_idx` (`Meio_Pagamento_idMeio_Pagamento` ASC) VISIBLE,
  CONSTRAINT `fk_Meio_Pagamento_has_Pedido_Meio_Pagamento1`
    FOREIGN KEY (`Meio_Pagamento_idMeio_Pagamento`)
    REFERENCES `ECommerce`.`Meio_Pagamento` (`idMeio_Pagamento`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Meio_Pagamento_has_Pedido_Pedido1`
    FOREIGN KEY (`Pedido_idPedido`)
    REFERENCES `ECommerce`.`Pedido` (`idPedido`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

```

‚ùóüëèüéâFim do Desafio 01